# 3.1. Módulo Padrões de Projeto GoFs Criacionais

Foco_01: Padrões de Projeto GoFs Criacionais

Entrega Mínima: 1 Padrão GoF Criacional, com nível de modelagem e nível de implementação evidenciados (ou seja, código rodando e hospedado no repositório do projeto).

Apresentação (em sala) explicando o GoF Criacional, com: (i) rastro claro aos membros participantes (MOSTRAR QUADRO DE PARTICIPAÇÕES & COMMITS); (ii) justificativas & senso crítico sobre o padrão GOF criacional, e (iii) comentários gerais sobre o trabalho em equipe. Tempo da Apresentação: +/- 5min. Recomendação: Apresentar diretamente via Wiki ou GitPages do Projeto. Baixar os conteúdos com antecedência, evitando problemas de internet no momento de exposição nas Dinâmicas de Avaliação.

A Wiki ou GitPages do Projeto deve conter um tópico dedicado ao Módulo Padrões de Projeto GoFs Criacionais, com 1 padrão GoF Criacional (modelagem & implementação), histórico de versões, referências, e demais detalhamentos gerados pela equipe nesse escopo.

Demais orientações disponíveis nas Diretrizes (vide Moodle).

## Builder


O Builder é um dos padrões de design criacionais descritos pelo Gang of Four (GoF). Ele é usado para criar objetos complexos passo a passo. Esse padrão permite que você separe o processo de construção da representação final de um objeto, possibilitando a criação de diferentes representações para o mesmo processo de construção. 

## Por que eu decidi usar o Builder?

Quando a criação de um objeto é muito complexa, com muitos parâmetros opcionais ou combinações diferentes, o uso de um construtor tradicional pode levar a código confuso e difícil de manter. O Builder resolve isso fornecendo um processo controlado e modular para criar objetos. É exatamente nessa situação em que nos encontramos com a classe usuario, por isso decidimos usar o builder. 

## Código com o Padrão Builder

Primeiro começamos criando um arquivo chamado usuario.ts e dentro dele criamos uma classe chamada Usuario:  

```typescript
export class Usuario {
    private nome: string;
    private email: string;
    private senha: string;
  
    constructor(nome: string, email: string, senha: string) {
      this.nome = nome;
      this.email = email;
      this.senha = senha;
    }
  
    public validarDados(): boolean {
      return this.email.includes('@') && this.senha.length >= 6;
    }
  
    public getNome(): string {
      return this.nome;
    }
  
    public getEmail(): string {
      return this.email;
    }

    public getSenha(): string {
      return this.senha;
    }
  }
  
```

### Explicação da Classe `Usuario`

A classe `Usuario` define um modelo para representar informações e comportamentos associados a um usuário. Aqui está uma explicação detalhada sobre o que cada parte dessa classe faz:

---

### Estrutura da Classe

1. **Atributos Privados**:
   - `nome`, `email` e `senha` são variáveis privadas. 
   - Sendo privadas, esses atributos só podem ser acessados ou modificados por métodos definidos dentro da classe. Isso ajuda a proteger os dados e garantir o encapsulamento.

2. **Construtor**:
   - O construtor é responsável por inicializar os valores de `nome`, `email` e `senha` ao criar uma nova instância da classe.
   - Exemplo de uso:
     ```typescript
     const usuario = new Usuario('João', 'joao@example.com', 'senha123');
     ```
     Após isso, os valores do nome, e-mail e senha do usuário estarão armazenados dentro do objeto criado.

3. **Método `validarDados()`**:
   - Retorna um valor booleano (`true` ou `false`) indicando se os dados do usuário são válidos.
   - **Validações**:
     - O e-mail deve conter o caractere `@`.
     - A senha deve ter pelo menos 6 caracteres.
   - Exemplo de uso:
     ```typescript
     if (usuario.validarDados()) {
       console.log('Usuário válido');
     } else {
       console.log('Dados inválidos');
     }
     ```

4. **Métodos de Acesso (Getters)**:
   - `getNome()`, `getEmail()` e `getSenha()` são métodos públicos que permitem acessar os valores dos atributos privados.
   - Exemplo de uso:
     ```typescript
     console.log(usuario.getNome()); // Exibe o nome do usuário.
     console.log(usuario.getEmail()); // Exibe o e-mail do usuário.
     ```

---

### Propósito da Classe

- **Modelagem de Dados**: Representa um usuário com nome, e-mail e senha, encapsulando os dados de forma segura.
- **Validação**: Permite verificar se os dados do usuário atendem a critérios básicos.
- **Encapsulamento**: Garante que os atributos do usuário só possam ser acessados e manipulados por métodos controlados, evitando alterações não autorizadas.

---

### Criação da classe usuarioBuilder

Essa classe será responsável por construir objetos Usuario passo a passo. Então começamos criando um arquivo chamado usuarioBuilder.ts. Em seguida escrevemos o seguinte código: 

```typescript
import { Usuario } from './usuario';
import { SenhaProxy } from './usuarioProxy'; 

export class UsuarioBuilder {
  private nome: string = "";
  private email: string = "";
  private senha: string = "";

  public setNome(nome: string): UsuarioBuilder {
    this.nome = nome;
    return this;
  }

  public setEmail(email: string): UsuarioBuilder {
    this.email = email;
    return this;
  }

  public setSenha(senha: string): UsuarioBuilder {
    this.senha = senha;
    return this;
  }

  public build(): Usuario {
    if (!this.email.includes('@')) {
      throw new Error("Email inválido!");
    }
    if (this.senha.length < 6) {
      throw new Error("A senha deve ter pelo menos 6 caracteres!");
    }

    // Use o proxy para gerenciar a senha
    const senhaSegura = SenhaProxy.processarSenha(this.senha);

    return new Usuario(this.nome, this.email, senhaSegura);
  }
}

```

### Explicação da Classe `UsuarioBuilder`


---


### **1. Classe `UsuarioBuilder`**
A classe `UsuarioBuilder` é responsável por construir instâncias de `Usuario` de forma incremental e validada. Ela utiliza o **padrão de projeto Builder**, que permite criar objetos complexos através de chamadas encadeadas.

### **Propriedades**
- `nome`: Uma string para armazenar o nome do usuário.
- `email`: Uma string para armazenar o e-mail do usuário.
- `senha`: Uma string para armazenar a senha do usuário.

---

### **2. Métodos de Configuração**
Os métodos `setNome`, `setEmail` e `setSenha` permitem definir os valores das propriedades:

### **`setNome(nome: string): UsuarioBuilder`**
- Define o nome do usuário.
- Retorna a própria instância (`this`) para permitir encadeamento de chamadas.

### **`setEmail(email: string): UsuarioBuilder`**
- Define o e-mail do usuário.
- Retorna a própria instância para encadeamento.

### **`setSenha(senha: string): UsuarioBuilder`**
- Define a senha do usuário.
- Retorna a própria instância para encadeamento.

---

### **3. Validações no Método `build`**
O método `build` é responsável por finalizar a criação do objeto `Usuario`. Ele realiza as seguintes validações:

1. **E-mail**:
   - Verifica se o e-mail contém o caractere `@`.
   - Caso contrário, lança um erro: `"Email inválido!"`.

2. **Senha**:
   - Verifica se a senha possui pelo menos 6 caracteres.
   - Caso contrário, lança um erro: `"A senha deve ter pelo menos 6 caracteres!"`.

---

### **4. Uso do Proxy (`SenhaProxy`)**
Depois de validar os dados, o método `build` utiliza o proxy `SenhaProxy` para processar a senha:

- **`SenhaProxy.processarSenha(this.senha)`**:
  - Um método que processa a senha para torná-la mais segura, como encriptá-la ou mascará-la.
  - Retorna a senha processada (`senhaSegura`), que é usada ao criar o objeto `Usuario`.

---

### **5. Criação do Objeto `Usuario`**
Após as validações e o processamento da senha, o método retorna uma nova instância de `Usuario`:

```typescript
return new Usuario(this.nome, this.email, senhaSegura);

```

## Histórico de Versão
| Versão | Data       | Descrição                                      | Autor               | Revisor               |
|--------|------------|------------------------------------------------|---------------------|-----------------------|
| 1.0    | 23/11/2024 | Primeira versão do artefato | [João Pedro](https://github.com/joaopedrodasilvarodrigues) | [João Pedro](https://github.com/joaopedrodasilvarodrigues) |
| 1.1    | 28/11/2024 | Builder | [Vinícius Brito](https://github.com/vini051), [João Pedro](https://github.com/joaopedrodasilvarodrigues), [Marcos Santos Bittar](https://github.com/Bittarx) e [Magno](https://github.com/magnluiz)  | [João Pedro](https://github.com/joaopedrodasilvarodrigues) |
| 1.2    | 28/11/2024 | Versão final do artefato | [Vinícius Brito](https://github.com/vini051)                                                                                                                                       | [João Pedro](https://github.com/joaopedrodasilvarodrigues) |